/*
 * Stepper Plugin [Formstone Library]
 * @author Ben Plum
 * @version 0.1.4
 *
 * Copyright Â© 2013 Ben Plum <mr@benplum.com>
 * Released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
 
if(jQuery)(function(b){function m(a){a=a||{};isMobile&&(a.trueMobile=!0,"undefined"===typeof a.mobile&&(a.mobile=!0));var e=b.extend({},g,a);return b(this).each(function(){var a=b(this);if(!a.data("stepper")){var c=parseFloat(a.attr("min")),d=parseFloat(a.attr("max")),f=parseFloat(a.attr("step"))||1;a.addClass("stepper-input").wrap('<div class="stepper '+e.customClass+'" />').after('<span class="stepper-step up">Up</span><span class="stepper-step down">Down</span>');var h=a.parent(".stepper");a.is(":disabled")&& h.addClass("disabled");a=b.extend({$stepper:h,$input:a,$steps:h.find(".stepper-steps"),min:void 0!==typeof c&&!isNaN(c)?c:!1,max:void 0!==typeof d&&!isNaN(d)?d:!1,step:void 0!==typeof f&&!isNaN(f)?f:1},e);c=new String(a.step);c=-1<c.indexOf(".")?c.length-c.indexOf(".")-1:0;a.digits=c;h.on("mousedown.stepper",".stepper-step",a,n).data("stepper",a)}})}function n(a){a.preventDefault();a.stopPropagation();j();var e=a.data;e.$stepper.hasClass("disabled")||(a=b(a.target).hasClass("up"),k(e,a,!0),b("body").on("mouseup.stepper", e,p))}function p(a){a.preventDefault();a.stopPropagation();j()}function k(a,b,g){var c=parseFloat(a.$input.val()),c=void 0!==typeof c&&!isNaN(c)?c:0,d=c+(b?a.step:-a.step);!1!==a.min&&d<a.min&&(d=a.min);!1!==a.max&&d>a.max&&(d=a.max);d!=c&&(c=d,d=Math.pow(10,a.digits),d=Math.round(c*d)/d,a.$input.val(d).trigger("change"),c=d);g&&(f=setInterval(function(){k(a,b,!1)},125))}function j(){void 0!==typeof f&&(clearInterval(f),f=null);b("body").off(".stepper")}isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent|| navigator.vendor||window.opera);var g={customClass:""},f=null,l={defaults:function(a){g=b.extend(g,a||{});return b(this)},disable:function(){return b(this).each(function(){var a=b(this),e=a.parent(".stepper");a.attr("disabled","disabled");e.addClass("disabled")})},enable:function(){return b(this).each(function(){var a=b(this),e=a.parent(".stepper");a.attr("disabled",null);e.removeClass("disabled")})},destroy:function(){return b(this).each(function(){var a=b(this);a.parent(".stepper").off(".stepper").find(".stepper-step").remove(); a.unwrap().removeClass("stepper-input")})}};b.fn.stepper=function(a){return l[a]?l[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"===typeof a||!a?m.apply(this,arguments):this}})(jQuery);